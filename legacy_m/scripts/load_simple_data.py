#!/usr/bin/env python3
"""
ะัะพััะพะน ะทะฐะณััะทัะธะบ ะดะฐะฝะฝัั ะฑะตะท ัะปะพะถะฝัั ะทะฐะฒะธัะธะผะพััะตะน
"""

import os
import sys
import logging
from pathlib import Path
from datetime import datetime

# ะะพะฑะฐะฒะปัะตะผ ะฟััั ะบ ะฟัะพะตะบัั
project_root = Path(__file__).parent.parent
sys.path.append(str(project_root))

from database.database import SessionLocal
from database.models import QuranVerse, Hadith, OrthodoxText

# ะะฐัััะพะนะบะฐ ะปะพะณะธัะพะฒะฐะฝะธั
logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')
logger = logging.getLogger(__name__)

def load_simple_data():
    """ะะฐะณััะถะฐะตะผ ะฟัะพัััะต ะดะฐะฝะฝัะต ะดะปั ะฒัะตั ะบะพะฝัะตััะธะน"""
    db = SessionLocal()
    try:
        logger.info("๐ ะะฐัะธะฝะฐะตะผ ะทะฐะณััะทะบั ะฟัะพัััั ะดะฐะฝะฝัั...")
        
        # ะัะพะฒะตััะตะผ, ะตััั ะปะธ ัะถะต ะดะฐะฝะฝัะต
        if db.query(QuranVerse).count() > 0:
            logger.info("โ ะะฐะฝะฝัะต ัะถะต ะทะฐะณััะถะตะฝั")
            return
        
        # ะะฐะณััะถะฐะตะผ ะะพัะฐะฝ
        logger.info("๐ ะะฐะณััะถะฐะตะผ ะะพัะฐะฝ...")
        quran_verses = [
            QuranVerse(
                surah_number=1, verse_number=1,
                arabic_text="ุจูุณููู ุงูููููู ุงูุฑููุญููููฐูู ุงูุฑููุญูููู",
                translation_ru="ะะพ ะธะผั ะะปะปะฐัะฐ, ะะธะปะพััะธะฒะพะณะพ, ะะธะปะพัะตัะดะฝะพะณะพ!",
                commentary="ะะฐัะฐะปะพ ะบะฐะถะดะพะน ัััั ะะพัะฐะฝะฐ.",
                confession='sunni'
            ),
            QuranVerse(
                surah_number=2, verse_number=3,
                arabic_text="ุงูููุฐูููู ููุคูููููููู ุจูุงููุบูููุจู ูููููููููููู ุงูุตููููุงุฉู ูููููููุง ุฑูุฒูููููุงูููู ูููููููููู",
                translation_ru="ะบะพัะพััะต ะฒะตัััั ะฒ ัะพะบัะพะฒะตะฝะฝะพะต, ัะพะฒะตััะฐัั ะฝะฐะผะฐะท ะธ ัะฐััะพะดััั ะธะท ัะพะณะพ, ัะตะผ ะั ะธั ะฝะฐะดะตะปะธะปะธ.",
                commentary="ะะฟะธัะฐะฝะธะต ะบะฐัะตััะฒ ะฑะพะณะพะฑะพัะทะฝะตะฝะฝัั.",
                confession='sunni'
            ),
            QuranVerse(
                surah_number=1, verse_number=1,
                arabic_text="ุจูุณููู ุงูููููู ุงูุฑููุญููููฐูู ุงูุฑููุญูููู",
                translation_ru="ะะพ ะธะผั ะะปะปะฐัะฐ, ะะธะปะพััะธะฒะพะณะพ, ะะธะปะพัะตัะดะฝะพะณะพ!",
                commentary="ะะฐัะฐะปะพ ะบะฐะถะดะพะน ัััั ะะพัะฐะฝะฐ.",
                confession='shia'
            )
        ]
        db.add_all(quran_verses)
        
        # ะะฐะณััะถะฐะตะผ ัะฐะดะธัั
        logger.info("๐ ะะฐะณััะถะฐะตะผ ัะฐะดะธัั...")
        hadiths = [
            Hadith(
                collection="ะััะฐัะธ",
                hadith_number=1,
                arabic_text="ุฅููุง ุงูุฃุนูุงู ุจุงูููุงุช",
                translation_ru="ะะพะธััะธะฝะต, ะดะตะปะฐ (ะพัะตะฝะธะฒะฐัััั) ัะพะปัะบะพ ะฟะพ ะฝะฐะผะตัะตะฝะธัะผ.",
                commentary="ะะดะธะฝ ะธะท ัะฐะผัั ะฒะฐะถะฝัั ัะฐะดะธัะพะฒ ะฒ ะธัะปะฐะผะต.",
                confession='sunni'
            ),
            Hadith(
                collection="ะะปั-ะะฐัะธ",
                hadith_number=1,
                arabic_text="ุนู ุฃุจู ุนุจุฏ ุงููู ุนููู ุงูุณูุงู ูุงู: ุฏุนุงุฆู ุงูููุฑ ุซูุงุซุฉ: ุงูุญุฑุต ูุงูุงุณุชูุจุงุฑ ูุงูุญุณุฏ",
                translation_ru="ะั ะะฑั ะะฑะดัะปะปะฐัะฐ (ะผะธั ะตะผั) ะฟะตัะตะดะฐะฝะพ: ะกัะพะปะฟะพะฒ ะฝะตะฒะตัะธั ััะธ: ะฐะปัะฝะพััั, ะฒััะพะบะพะผะตัะธะต ะธ ะทะฐะฒะธััั.",
                commentary="ะัะฝะพะฒั ะฝะตะฒะตัะธั ะฒ ัะธะธััะบะพะผ ะธัะปะฐะผะต.",
                confession='shia'
            )
        ]
        db.add_all(hadiths)
        
        # ะะฐะณััะถะฐะตะผ ะฟัะฐะฒะพัะปะฐะฒะฝัะต ัะตะบััั
        logger.info("โช ะะฐะณััะถะฐะตะผ ะฟัะฐะฒะพัะปะฐะฒะฝัะต ัะตะบััั...")
        orthodox_texts = [
            OrthodoxText(
                source_type='ะะธะฑะปะธั',
                book_name='ะะฒะฐะฝะณะตะปะธะต ะพั ะะฐััะตั',
                chapter_number=6,
                verse_number=9,
                original_text='ะััะต ะฝะฐั, ัััะธะน ะฝะฐ ะฝะตะฑะตัะฐั! ะดะฐ ัะฒััะธััั ะธะผั ะขะฒะพะต;',
                translation_ru='ะััะต ะฝะฐั, ัััะธะน ะฝะฐ ะฝะตะฑะตัะฐั! ะดะฐ ัะฒััะธััั ะธะผั ะขะฒะพะต;',
                commentary='ะะฐัะฐะปะพ ะผะพะปะธัะฒั ะะพัะฟะพะดะฝะตะน.',
                theme='ะะพะปะธัะฒะฐ',
                confession='orthodox'
            ),
            OrthodoxText(
                source_type='ะะธะฑะปะธั',
                book_name='ะะพัะปะฐะฝะธะต ะบ ะะฒัะตัะผ',
                chapter_number=11,
                verse_number=1,
                original_text='ะะตัะฐ ะถะต ะตััั ะพัััะตััะฒะปะตะฝะธะต ะพะถะธะดะฐะตะผะพะณะพ ะธ ัะฒะตัะตะฝะฝะพััั ะฒ ะฝะตะฒะธะดะธะผะพะผ.',
                translation_ru='ะะตัะฐ ะถะต ะตััั ะพัััะตััะฒะปะตะฝะธะต ะพะถะธะดะฐะตะผะพะณะพ ะธ ัะฒะตัะตะฝะฝะพััั ะฒ ะฝะตะฒะธะดะธะผะพะผ.',
                commentary='ะะฟัะตะดะตะปะตะฝะธะต ะฒะตัั ะฒ ััะธััะธะฐะฝััะฒะต.',
                theme='ะะตัะฐ',
                confession='orthodox'
            ),
            OrthodoxText(
                source_type='ะกะฒััะพะพัะตัะตัะบะธะต ัััะดั',
                book_name='ะะตััะฒะธัะฐ',
                author='ะัะตะฟะพะดะพะฑะฝัะน ะะพะฐะฝะฝ ะะตััะฒะธัะฝะธะบ',
                chapter_number=28,
                verse_number=1,
                original_text='ะะพะปะธัะฒะฐ ะตััั ะฒะพะทะฝะพัะตะฝะธะต ัะผะฐ ะบ ะะพะณั.',
                translation_ru='ะะพะปะธัะฒะฐ ะตััั ะฒะพะทะฝะพัะตะฝะธะต ัะผะฐ ะบ ะะพะณั.',
                commentary='ะัะฐัะบะพะต ะพะฟัะตะดะตะปะตะฝะธะต ะผะพะปะธัะฒั.',
                theme='ะะพะปะธัะฒะฐ',
                confession='orthodox'
            )
        ]
        db.add_all(orthodox_texts)
        
        db.commit()
        logger.info(f"โ ะะฐะณััะถะตะฝะพ: {len(quran_verses)} ะฐััะพะฒ, {len(hadiths)} ัะฐะดะธัะพะฒ, {len(orthodox_texts)} ะฟัะฐะฒะพัะปะฐะฒะฝัั ัะตะบััะพะฒ")
        
    except Exception as e:
        logger.error(f"โ ะัะธะฑะบะฐ ะทะฐะณััะทะบะธ ะดะฐะฝะฝัั: {e}")
        db.rollback()
        raise
    finally:
        db.close()

if __name__ == "__main__":
    load_simple_data()
